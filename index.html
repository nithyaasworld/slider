<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <h1>Custom Slider</h1>
      <div class="slider">
        <div class="progress-highlight"></div>
        <div class="circle"></div>
      </div>
      <div class="value-display">Value: <span class="value">0</span></div>
    </div>
    <script>
      const circleEl = document.querySelector(".circle");
      const sliderEl = document.querySelector(".slider");
      const valueEl = document.querySelector(".value");
      const progressHighlightEl = document.querySelector(".progress-highlight");

      console.log(circleEl.offsetLeft);
      const mousedownHandler = (e) => {
        document.body.style.cursor = "grab";
        console.log("mouse clicked");
        document.body.addEventListener("mousemove", mouseMoveHandler);
      };
      const mouseupHandler = () => {
        document.body.style.cursor = "auto";
        document.body.removeEventListener("mousemove", mouseMoveHandler);
      };
      const mouseMoveHandler = (e) => {
        document.body.style.cursor = "grabbing";
        console.log(e.clientX - sliderEl.offsetLeft, sliderEl.offsetWidth);
        let progressWidth =
          e.clientX - sliderEl.offsetLeft <= 0
            ? 0
            : e.clientX - sliderEl.offsetLeft >= sliderEl.offsetWidth - 23
            ? sliderEl.offsetWidth - 22
            : e.clientX - sliderEl.offsetLeft;
        circleEl.style.left = progressWidth + "px";
        progressHighlightEl.style.width = progressWidth + "px";

        valueEl.innerText = Math.floor(
          (parseInt(circleEl.style.left) / 174) * 100
        );
      };
      circleEl.addEventListener("mousedown", mousedownHandler);
      document.body.addEventListener("mouseup", mouseupHandler);
    </script>
  </body>
</html>
